
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Coronavirus Tracker</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link href="https://unpkg.com/material-components-web@v4.0.0/dist/material-components-web.min.css" rel="stylesheet">
  <script src="https://unpkg.com/material-components-web@v4.0.0/dist/material-components-web.min.js"></script>

  <style>

      p.view{
          font-size: 85px;
      }
      h2.view{
          font-size: 75px;
      }
    .view {
      display: none;
      text-align: center;

    }

    :root {
      --mdc-theme-primary: blue	;
    }
      table, td {
  border-spacing: 4px;
  border: 2px solid black;
}
  </style>

</head>

<body onload="worldData()">

  <header class="mdc-top-app-bar" style="left: 0; top: 0;">
    <div class="mdc-top-app-bar__row">
      <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
        <button class="material-icons mdc-top-app-bar__navigation-icon mdc-icon-button">menu</button>
        <span class="mdc-top-app-bar__title">Covid-19 Searcher</span>
      </section>
    </div>
  </header>

  <aside class="mdc-drawer mdc-drawer--modal">
    <div class="mdc-drawer__content">
      <nav class="mdc-list">
        <a class="mdc-list-item mdc-list-item--activated" href="#home" aria-current="page">
          <i class="material-icons mdc-list-item__graphic" aria-hidden="true">home</i>
          <span class="mdc-list-item__text">Home</span>
        </a>
        <a class="mdc-list-item" href="#search" onclick="clearData()">
          <i class="material-icons mdc-list-item__graphic" aria-hidden="true">search</i>
          <span class="mdc-list-item__text" >Search</span>
        </a>
        <a class="mdc-list-item" href="#data">
          <i class="material-icons mdc-list-item__graphic" aria-hidden="true">table_chart</i>
          <span class="mdc-list-item__text">Data</span>
        </a>
          <a class="mdc-list-item" href="#graph">
          <i class="material-icons mdc-list-item__graphic" aria-hidden="true">show_chart</i>
          <span class="mdc-list-item__text">Graph</span>
        </a>
          <a class="mdc-list-item" href="#about">
          <i class="material-icons mdc-list-item__graphic" aria-hidden="true">info</i>
          <span class="mdc-list-item__text">About</span>
        </a>
      </nav>
    </div>
  </aside>

  <div class="mdc-drawer-scrim"></div>

  <main class="main-content mdc-top-app-bar--fixed-adjust">

    <div id="home" class="view">
      <h1>Home</h1>
      <p >This is the Data comes from the Center For Disease Control.</p>
      <h2>Total Cases United States</h2>
      <p  style="color:#006400;" id="usCases"></p>
      <h2>Total Deaths United States</h2>
      <p  style="color:red;" id="usDeaths"></p>
      <h1 id="weather"></h1>
    </div>
      
      
      
      <div id="search" class="view">
      <h1>Search</h1>
      <p>Select a State you wish to search. Please select Max of 5.</p>
          
          <form method="get" onsubmit="myFunction()">
  <input list="countries" id="country">
  <datalist id="countries">
    <select>
<option value="AL">Alabama</option>
	<option value="AK">Alaska</option>
	<option value="AZ">Arizona</option>
	<option value="AR">Arkansas</option>
	<option value="CA">California</option>
	<option value="CO">Colorado</option>
	<option value="CT">Connecticut</option>
	<option value="DE">Delaware</option>
	<option value="DC">District Of Columbia</option>
	<option value="FL">Florida</option>
	<option value="GA">Georgia</option>
	<option value="HI">Hawaii</option>
	<option value="ID">Idaho</option>
	<option value="IL">Illinois</option>
	<option value="IN">Indiana</option>
	<option value="IA">Iowa</option>
	<option value="KS">Kansas</option>
	<option value="KY">Kentucky</option>
	<option value="LA">Louisiana</option>
	<option value="ME">Maine</option>
	<option value="MD">Maryland</option>
	<option value="MA">Massachusetts</option>
	<option value="MI">Michigan</option>
	<option value="MN">Minnesota</option>
	<option value="MS">Mississippi</option>
	<option value="MO">Missouri</option>
	<option value="MT">Montana</option>
	<option value="NE">Nebraska</option>
	<option value="NV">Nevada</option>
	<option value="NH">New Hampshire</option>
	<option value="NJ">New Jersey</option>
	<option value="NM">New Mexico</option>
	<option value="NY">New York</option>
	<option value="NC">North Carolina</option>
	<option value="ND">North Dakota</option>
	<option value="OH">Ohio</option>
	<option value="OK">Oklahoma</option>
	<option value="OR">Oregon</option>
	<option value="PA">Pennsylvania</option>
	<option value="RI">Rhode Island</option>
	<option value="SC">South Carolina</option>
	<option value="SD">South Dakota</option>
	<option value="TN">Tennessee</option>
	<option value="TX">Texas</option>
	<option value="UT">Utah</option>
	<option value="VT">Vermont</option>
	<option value="VA">Virginia</option>
	<option value="WA">Washington</option>
	<option value="WV">West Virginia</option>
	<option value="WI">Wisconsin</option>
	<option value="WY">Wyoming</option>
</select>
  </datalist>
  <input type="submit">
              <button onclick="SearchLocation()"> Get current State   </button>
</form>
          
    <p id="demo">States Selected: </p> 
          
          
    <button onclick="SearchData()"> Display total Number of positive Cases   </button> 
    <button onclick="SearchData2()"> Display total Number of Deaths  </button>
    <button onclick="SearchData3()"> Display day by day positive cases  </button>
    <button onclick="SearchData4()"> Display day by day deaths </button>
    </div>
      
      
      
    <div id="about" class="view">
      <h1>About</h1>
      <p>Hello my name is Kevin Barret. Im a CS student at UIC. This is the Big Project</p>
    </div>
      
      
      <div id="graph" class="view">
       <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
       <div id="chart_div"></div>
    </div>
      
      
      
      
    <div id="data" class="view">
      <h1 class="header" id="dataType">Data</h1>
        
      <table id="tableData">
          
</table>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    </div>
  </main>
    
    
    
    
  <script>
   
   let State = "";
   let Dates = [];
   let casesConfirmed = [];
   var return_first;
   var searchType;
     google.charts.load('current', {packages: ['corechart', 'line']});
google.charts.setOnLoadCallback(drawBasic);
      
      
     
      
  function myFunction() {
       
  var txtState = document.getElementById('country');

  State = txtState.value;
          
 document.getElementById("demo").innerHTML = "States Selected: " + State;

}
      
  function todaysWeather(city){
      
     var url = " https://cors-anywhere.herokuapp.com/http://api.weatherstack.com/current?access_key=eec19601a1252f307c71c0b0043b5859&units=f&query=" + city;      
      fetch(url)
  .then(response => response.json())
  .then(data => 
        printMe(data));
  }
     
      
  function printMe(data){
      console.log(data);
                  document.getElementById("weather").innerHTML = "todays temperture is " + data.current.temperature + " in " + data.location.name;

  }
      
  function worldData(){
     fetch("https://covidtracking.com/api/us")
  .then(response => response.json())
  .then(data => {
    data.forEach(({ death, positive }) => {
       document.getElementById("usCases").innerHTML = positive.toLocaleString();
      document.getElementById("usDeaths").innerHTML = death.toLocaleString(); 
    });
  });
      
      $.ajax({
  url: "https://geolocation-db.com/jsonp",
  jsonpCallback: "callback",
  async: false, // set to false so order of operations is correct
  dataType: "jsonp",
  success: function(location) {
  todaysWeather(location.city);
}
      });

  }
      
      
  function clearData(){
    State = "";
    Dates = [];
    casesConfirmed = [];
    return_first;
    searchType;
    document.getElementById("demo").innerHTML = "States Selected: " + State;
    document.getElementById("tableData").innerHTML = "";


  }
   
      
  function SearchLocation(){
      
      var stateAbbr;
      $.ajax({
  url: "https://geolocation-db.com/jsonp",
  jsonpCallback: "callback",
  async: false, // set to false so order of operations is correct
  dataType: "jsonp",
  success: function(location) {
    stateAbbr = convertRegion(location.state, TO_ABBREVIATED);
    State = stateAbbr;
    document.getElementById("demo").innerHTML = "States Selected: " + stateAbbr;
  }
});
      
  }
      
      
      
      
      
      
const TO_NAME = 1;
const TO_ABBREVIATED = 2;

function convertRegion(input, to) {
    var states = [
        ['Alabama', 'AL'],
        ['Alaska', 'AK'],
        ['American Samoa', 'AS'],
        ['Arizona', 'AZ'],
        ['Arkansas', 'AR'],
        ['Armed Forces Americas', 'AA'],
        ['Armed Forces Europe', 'AE'],
        ['Armed Forces Pacific', 'AP'],
        ['California', 'CA'],
        ['Colorado', 'CO'],
        ['Connecticut', 'CT'],
        ['Delaware', 'DE'],
        ['District Of Columbia', 'DC'],
        ['Florida', 'FL'],
        ['Georgia', 'GA'],
        ['Guam', 'GU'],
        ['Hawaii', 'HI'],
        ['Idaho', 'ID'],
        ['Illinois', 'IL'],
        ['Indiana', 'IN'],
        ['Iowa', 'IA'],
        ['Kansas', 'KS'],
        ['Kentucky', 'KY'],
        ['Louisiana', 'LA'],
        ['Maine', 'ME'],
        ['Marshall Islands', 'MH'],
        ['Maryland', 'MD'],
        ['Massachusetts', 'MA'],
        ['Michigan', 'MI'],
        ['Minnesota', 'MN'],
        ['Mississippi', 'MS'],
        ['Missouri', 'MO'],
        ['Montana', 'MT'],
        ['Nebraska', 'NE'],
        ['Nevada', 'NV'],
        ['New Hampshire', 'NH'],
        ['New Jersey', 'NJ'],
        ['New Mexico', 'NM'],
        ['New York', 'NY'],
        ['North Carolina', 'NC'],
        ['North Dakota', 'ND'],
        ['Northern Mariana Islands', 'NP'],
        ['Ohio', 'OH'],
        ['Oklahoma', 'OK'],
        ['Oregon', 'OR'],
        ['Pennsylvania', 'PA'],
        ['Puerto Rico', 'PR'],
        ['Rhode Island', 'RI'],
        ['South Carolina', 'SC'],
        ['South Dakota', 'SD'],
        ['Tennessee', 'TN'],
        ['Texas', 'TX'],
        ['US Virgin Islands', 'VI'],
        ['Utah', 'UT'],
        ['Vermont', 'VT'],
        ['Virginia', 'VA'],
        ['Washington', 'WA'],
        ['West Virginia', 'WV'],
        ['Wisconsin', 'WI'],
        ['Wyoming', 'WY'],
    ];

    // So happy that Canada and the US have distinct abbreviations
    var provinces = [
        ['Alberta', 'AB'],
        ['British Columbia', 'BC'],
        ['Manitoba', 'MB'],
        ['New Brunswick', 'NB'],
        ['Newfoundland', 'NF'],
        ['Northwest Territory', 'NT'],
        ['Nova Scotia', 'NS'],
        ['Nunavut', 'NU'],
        ['Ontario', 'ON'],
        ['Prince Edward Island', 'PE'],
        ['Quebec', 'QC'],
        ['Saskatchewan', 'SK'],
        ['Yukon', 'YT'],
    ];

    var regions = states.concat(provinces);

    var i; // Reusable loop variable
    if (to == TO_ABBREVIATED) {
        input = input.replace(/\w\S*/g, function (txt) { return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase(); });
        for (i = 0; i < regions.length; i++) {
            if (regions[i][0] == input) {
                return (regions[i][1]);
            }
        }
    } else if (to == TO_NAME) {
        input = input.toUpperCase();
        for (i = 0; i < regions.length; i++) {
            if (regions[i][1] == input) {
                return (regions[i][0]);
            }
        }
    }
}
      
      



      

  
      
function SearchData(){
   

    document.getElementById("search").style.display= "none";
    document.getElementById("data").style.display= "block";
    State = State.toLowerCase();
     url1 = 'https://covidtracking.com/api/v1/states/' + State + '/daily.json';
    
    
    fetch(url1)
  .then(response => response.json())
    .then(data => {
        var temp = [];
        var tempNum = 0;
       
        data.forEach(({ date, positive }) =>{
            var dateString  = String(date);
            var year   = dateString.substring(0,4);
            var month  = dateString.substring(4,6);
            var day    = dateString.substring(6,8);
            var date1   = month + "/" + day + "/" + year;
            Dates.push(date1);
            casesConfirmed.push(positive.toLocaleString());
        });
            document.getElementById("dataType").innerHTML = "Total Positive Tests";
         searchType = "Posative";
         print();
        drawBasic();
    });

}
      
      
      function SearchData2(){
   

    
     
    document.getElementById("search").style.display= "none";
    document.getElementById("data").style.display= "block";
    State = State.toLowerCase();

     url1 = 'https://covidtracking.com/api/v1/states/' + State + '/daily.json';
    fetch(url1)
  .then(response => response.json())
  .then(data => {
        var temp = [];
        var tempNum = 0;
        data.forEach(({ date, death }) =>{
            var dateString  = String(date);
            var year   = dateString.substring(0,4);
            var month  = dateString.substring(4,6);
            var day    = dateString.substring(6,8);
            var date1   = month + "/" + day + "/" + year;
            Dates.push(date1);
            casesConfirmed.push(death.toLocaleString());
        });
                    document.getElementById("dataType").innerHTML = "Total Deaths";
         searchType = "Deaths";

         print();
        drawBasic();
    });

}
      function SearchData3(){
   

    
     
    document.getElementById("search").style.display= "none";
    document.getElementById("data").style.display= "block";
    State = State.toLowerCase();

     url1 = 'https://covidtracking.com/api/v1/states/' + State + '/daily.json';
    fetch(url1)
  .then(response => response.json())
  .then(data => {
        var temp = [];
        var tempNum = 0;
        data.forEach(({ date,positiveIncrease   }) =>{
            var dateString  = String(date);
            var year   = dateString.substring(0,4);
            var month  = dateString.substring(4,6);
            var day    = dateString.substring(6,8);
            var date1   = month + "/" + day + "/" + year;
            Dates.push(date1);
            casesConfirmed.push(positiveIncrease.toLocaleString() );
        });
                 searchType = "posative cases each day";

         document.getElementById("dataType").innerHTML = "New Cases Day by day";
         print();
        drawBasic();
    });

}
            function SearchData4(){
   

    
     
    document.getElementById("search").style.display= "none";
    document.getElementById("data").style.display= "block";
    State = State.toLowerCase();

     url1 = 'https://covidtracking.com/api/v1/states/' + State + '/daily.json';
    fetch(url1)
  .then(response => response.json())
  .then(data => {
        var temp = [];
        var tempNum = 0;
        data.forEach(({ date,deathIncrease   }) =>{
            var dateString  = String(date);
            var year   = dateString.substring(0,4);
            var month  = dateString.substring(4,6);
            var day    = dateString.substring(6,8);
            var date1   = month + "/" + day + "/" + year;
            Dates.push(date1);
            casesConfirmed.push(deathIncrease.toLocaleString() );
        });
         searchType = "deaths each day";
         document.getElementById("dataType").innerHTML = "Deaths day By Day";
         print();
        drawBasic();
    });

}
      
 
         function print(){
    var numberCountries = 1;         
    var i;
    var len = casesConfirmed.length;

             if(numberCountries == 1){
            var table = document.getElementById("tableData");
            var row = table.insertRow(0);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            cell1.innerHTML = "Date";
            cell2.innerHTML = State;
        for(i = 0 ; i < len;i++){
            var row = table.insertRow(i+1);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            cell1.innerHTML = Dates[i];
            cell2.innerHTML = casesConfirmed[i];
          }
}
            
      }   
      

   
      
      function drawBasic() {

      var data = new google.visualization.DataTable();
      data.addColumn('number', 'X');
      data.addColumn('number', State);
      casesConfirmed.reverse();
      Dates.reverse();

     for(i = 0 ; i < casesConfirmed.length;i++){
            data.addRow([i,casesConfirmed[i]]);
          }
    
     

      var options = {
        hAxis: {
          title: 'Time'
        },
        vAxis: {
          title: searchType
        }
      };

      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));

      chart.draw(data, options);
    }
      
      
      
    // Activity 9.1
    let btns = document.querySelectorAll('.mdc-button')

    let drawerEl = document.querySelector('.mdc-drawer')
    const drawer = new mdc.drawer.MDCDrawer.attachTo(drawerEl)

    let topAppBarEl = document.querySelector('.mdc-top-app-bar');
    const topAppBar = new mdc.topAppBar.MDCTopAppBar.attachTo(topAppBarEl);

    topAppBar.setScrollTarget(document.querySelector('.main-content'));
    topAppBar.listen('MDCTopAppBar:nav', () => {
      drawer.open = !drawer.open;
    });
      
    var txtCountry = document.getElementById('country');


    // Activity  9.2
    document.querySelector('#home').style.display = 'block'
    document.querySelectorAll('.mdc-drawer .mdc-list-item').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.view').forEach(view => {
          view.style.display = 'none'
          if (`#${view.id}` === item.hash) {
            view.style.display = 'block'
          }
        })
        drawer.open = !drawer.open
      })
    })

   
  </script>
</body>

</html>